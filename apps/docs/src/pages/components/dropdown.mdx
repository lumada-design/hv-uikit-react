import { Callout } from "nextra/components";
import { dropdownClasses, HvDropdown } from "@hitachivantara/uikit-react-core";

import Playground from "@docs/components/code/Playground";
import { Description } from "@docs/components/page/Description";
import { Page } from "@docs/components/page/Page";
import { getComponentData } from "@docs/utils/component";

export const getStaticProps = async ({ params }) => {
  const meta = await getComponentData("Dropdown", "core", dropdownClasses);
  return { props: { ssg: { meta } } };
};

<Description />

<Page>

<Playground
  Component={HvDropdown}
  componentName="HvDropdown"
  controls={{
    label: { defaultValue: "Select value" },
    description: { defaultValue: "Description" },
    required: { defaultValue: false },
    readOnly: { defaultValue: false },
    disabled: { defaultValue: false },
    multiSelect: { defaultValue: false },
    showSearch: { defaultValue: false },
  }}
  componentProps={{
    values: [
      { label: "value 1" },
      { label: "value 2" },
      { label: "value 3" },
      { label: "value 4" },
    ],
  }}
/>

### Customized items

The items in the `values` prop can be can be customized, namely with an icon or custom content on the `label` prop. Each item can be individually disabled also.

```tsx live
<HvDropdown
  values={[
    { id: "save", label: "Save", icon: <Save /> },
    { id: "export", label: "Export", icon: <Open />, disabled: true },
    {
      id: "preview",
      label: <HvTypography variant="label">Preview</HvTypography>,
      icon: <Preview />,
    },
  ]}
/>
```

### Custom dropdown

<Callout type="info">
  Please check out the [examples section](/examples/dropdowns) for more samples
  of custom dropdowns.
</Callout>

You might need to customize the dropdown content entirely. To do this use the `HvBaseDropdown` component.

```tsx live collapsed
<HvBaseDropdown placeholder="Click to open">
  <HvPanel>
    <HvTypography>Your dropdown content</HvTypography>
  </HvPanel>
</HvBaseDropdown>
```

You might want to control yourself the dropdown and its state. In that case you should use the props `expanded` and `onToggle`.

```tsx live collapsed
import { forwardRef, useState } from "react";

export default function Demo() {
  const [popperOpen, setPopperOpen] = useState(false);

  return (
    <>
      <HvButton onClick={() => setPopperOpen((p) => !p)}>
        {popperOpen ? "Close" : "Open"}
      </HvButton>
      <HvBaseDropdown
        variableWidth
        expanded={popperOpen}
        placeholder="Click to open"
        onToggle={() => setPopperOpen((p) => !p)}
      >
        <HvPanel id={"myPanelId"}>
          <HvTypography>Your dropdown content</HvTypography>
        </HvPanel>
      </HvBaseDropdown>
    </>
  );
}
```

If you want to customize the header of the dropdown, you can use the `headerComponent` prop.
Don't forget to forward the ref to the component. The `onToggle` callback will be called on the `onClick` event of the header component.

```tsx live collapsed
import { forwardRef, useState } from "react";

const HeaderComponent = forwardRef<HTMLButtonElement, HvDropdownButtonProps>(
  function HeaderComponent(props, ref) {
    const { open, ...others } = props;
    return (
      <HvIconButton
        ref={ref}
        variant="primarySubtle"
        title="Settings"
        {...others}
      >
        <Settings />
      </HvIconButton>
    );
  },
);

export default function Demo() {
  const [popperOpen, setPopperOpen] = useState(false);

  return (
    <HvBaseDropdown
      variableWidth
      expanded={popperOpen}
      open={popperOpen}
      headerComponent={HeaderComponent}
      onToggle={() => setPopperOpen((p) => !p)}
      classes={{ panel: "rounded-round" }}
    >
      <HvPanel id={"myPanelId"}>
        <HvTypography>Your dropdown content</HvTypography>
      </HvPanel>
    </HvBaseDropdown>
  );
}
```

### Related components

- [`HvFormElement`](/components/form-element)
- [`HvSelect`](/components/select)

</Page>
