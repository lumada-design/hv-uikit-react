import { Meta, Canvas, Story } from "@storybook/addon-docs";
import * as TableSectionStories from "./TableSection.stories";

<Meta of={TableSectionStories} />

# Table Section

In recent minor versions updates of the Design System specification, several visual changes were introduced
that substantially change the look of the `Table` component. While UI Kit v5.x tries to keep up with the latest
Design System specification, adapting to these changes in a minor version update of the library would lead to breaking
changes that might not be wanted by our users as they may want to stick to the old layout, efectively locking the users
to a specific UI Kit version.

Recognizing the challenges posed by immediate adaptation and breaking changes on a minor version, we've introduced
the `HvTableSection` component. This component is designed to serve as a temporary solution allowing developers to benefit
from the updated visuals of the `Table` component if they wish to.

## How to use

If you want to use the new `Table` visuals on the tables in your application you just need to wrap your table code
with the `HvTableSection` component:

```tsx
<HvTableSection>{/* old table code */}</HvTableSection>
```

This will result in the table adapting to the new visuals:

<Canvas of={TableSectionStories.SimpleTableSectionStory} />
If your table includes more complex controls, like bulk actions or pagination, these
are adapted just the same:

<Canvas of={TableSectionStories.CompleteTableSectionStory} />

The way the `HvTableSection` component works is by wrapping your table with the `HvSection` component. As such,
you can pass a set of section properties to the underlying `HvSection` component through the `sectionProps` property
and configure the section as you please. The sample below illustrates how you can have an expandable section
with a table inside and a set of actions.

<Canvas of={TableSectionStories.PropsTableSectionStory} />

## Samples

In the context of these visual changes, Design System introduced new table samples.
You can find examples on how to implement some of these samples in this section.

### Editable Table

This sample showcases an editable table where new rows can be added and rows can be edited and deleted.
To emulate a scenario closer to real-life, server-side pagination was used with loading states.
Our [Complete Table sample](./?path=/docs/visualizations-table-complete-table--docs) explains in more detail how you can achieve this server-side pagination.
In order to show the snackbar inside the table section, the `HvSnackbarProvider` component was used.
Setting the `container` property of this component to the section content `ref` and changing the snackbar position to `absolute` enables the snackbar to slide from
the section content.

<Canvas of={TableSectionStories.EditableStory} />

### Table Filter

The sample below showcases a table where you can easily apply, remove, and configure filters using a filter group.
In this sense, the `useHvFilters` hook was used. When using this hook, the `setAllFilters` utility is enabled allowing you to apply filters to various columns of the table
at the same time.

By default, `setAllFilters` will only show the rows resulting from the intersection of all filters. This means that if you provide various filters for
the same column, no rows are returned. If you need an union behavior and filter a column by various values, you can override the default table behavior.
Use the "Multiple column filters" checkbox to switch between these two behaviors.

In this sample the `useHvGlobalFilter` hook was also used to apply a search filter to all columns at the same time.

<Canvas of={TableSectionStories.FilterStory} />

### Table Settings

The sample below showcases the ability to configure the columns of the table by dragging the columns to mark them as fixed, visible or hidden.

<Canvas of={TableSectionStories.TableSettingsStory} />
